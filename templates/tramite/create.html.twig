{% extends 'base.html.twig' %}

{% block title %}Trámite{% endblock %}

{% block body %}
	{{parent()}}

	<div class="sectionTitle">
		<h2>TRÁMITE</h2>
	</div>
	
	{{form(formulario)}}

	<div class="btnCancelar">
        <a href="/tramite" class="btn btn-danger mb-4" id="cancelar">Cancelar</a>
    </div>

	<script>

		const divTramite = document.querySelectorAll('div')[5];

		{# Fecha de inicio #}
		let fechaInicio = divTramite.children[0];

		{# Tipo de trámite y Estado del trámite #}
		let tipoTramite = divTramite.children[1];
		let estadoTramite = divTramite.children[3];

		{# Observación #}
		let observacion = divTramite.children[2];

		{# Persona #}
		let persona = divTramite.children[4];

		{# Usuario #}
		let usuario = divTramite.children[5];



		const btnRegistrar = document.querySelectorAll('button')[0];


		{# divs contenedores #}
        let divFechaInicio = document.createElement('div');
        let divTipoEstadoTramite = document.createElement('div');
        let divObservacion = document.createElement('div');
        let divPersona = document.createElement('div');
        let divUsuario = document.createElement('div');

		
		divFechaInicio.classList.add('divFechaInicio');
        divTipoEstadoTramite.classList.add('divTipoEstadoTramite');
        divObservacion.classList.add('divObservacion');
        divPersona.classList.add('divPersona');
        divUsuario.classList.add('divUsuario');


		{# appends #}
		divTramite.appendChild(divFechaInicio);
        divTramite.appendChild(divTipoEstadoTramite);
        divTramite.appendChild(divObservacion)
        divTramite.appendChild(divPersona);
        divTramite.appendChild(divUsuario);



		{# Fecha de inicio #}
		divFechaInicio.appendChild(fechaInicio);

		{# Tipo de trámite y Estado del trámite #}
		divTipoEstadoTramite.appendChild(tipoTramite);
		divTipoEstadoTramite.appendChild(estadoTramite);

		{# Observación #}
		divObservacion.appendChild(observacion);

		{# Persona #}
		divPersona.appendChild(persona);

		{# Usuario #}
		divUsuario.appendChild(usuario);

		{# Botón Registrar #}
		divTramite.appendChild(btnRegistrar);

	</script>

	<!-- POPUP MADE IN NOSOTROS -->
	<!-- Para funcionar tienen que agregar la clase 'is-open' al elemento con clase 'popup' -->

	<div class="our-popup" id="popup-carga-exitosa">
		<div class="container">
			<header>
				<span></span>
				<a href="#" data-close>
					<i class="icon">X</i> <!-- Porfavor poner iconito luego... -->
				</a> 
			</header>
			<div class="our-popup-body">
				<div>
					<i class="icon green">&check;</i>
					<span> tramite agregado exitosamente</span>
				</div>	
			</div>
			<footer>
				<ul>
					<li>
						<a href="/tramite" class="button">
							<span>Volver al listado</span>
						</a>
					</li>
						<li>
						<a href="#" class="button" data-close>
							<span>Seguir cargando</span>
						</a>
					</li>
				</ul>
			</footer>
		</div>
	</div>

	<!---------------------------->

	<script>
		document.querySelectorAll('.our-popup')
						.forEach(function(popup) {
							popup.querySelectorAll('[data-close]')
									 .forEach(function(closeBtn) {
										 closeBtn.addEventListener('click', function(btn) {
											 popup.classList.remove('is-open');
										 });
									 })
						})

		if(location.search.includes('success=1')) {
			setTimeout(function(){
				document.querySelector('#popup-carga-exitosa')
							.classList.add('is-open');
			}, 500)
		}

	</script>

{% endblock %}
